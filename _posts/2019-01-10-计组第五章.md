---
layout: post
title: "计组第五章"
date: 2019-01-10
author: jjnoob
category: 2019-01
tags: studying
---


> ### 写markdown的时候，经常出现在VS code里面显示是正常的，一放到博客上面就有emm小问题。 所以，我尽量用少一点比较emm的功能。

> ### 好狗血，写好之后直接上传到_posts里面在博客中会出现bug，而，创建一个markdown文件，再复制过去，就不会出现这种问题。。

# **一，CPU的功能，组成结构、各组成部件（包括各寄存器）的作用**

### 1，组成：
* 运算器   
* 控制器
* Cache（指令、数据）
* 内部总线

### 2，功能：
* 指令控制：程序的顺序控制。
* 操作控制：管理并产生每条指令的操作信号，并把它们送到相应部件，控制这些部件按要求进行动作。                     
* 时间控制：对各种操作实施时间上的定时。
* 数据加工：对数据进行算术和逻辑运算处理。

### 3，运算器：

由算术逻辑单元（ALU）、通用寄存器（R0—R3）、数据缓冲寄存器DR和状态字寄存器PSW组成；是数据加工处理部件；在控制器的指挥下运行。      

##### 运算器的主要功能：
* 执行算术运算
* 执行逻辑运算，并进行逻辑测试

##### 定点运算器的结构：
* 单总线结构的运算器
* 双总线结构的运算器
* 三总线结构的运算器

### 4，控制器：

##### 组成：
PC、指令寄存器（IR） 、指令译码器（ID）、时序产生器和操作控制器

##### 作用：
 “决策机构” ，协调和指挥整个系统的操作。

##### 功能：
* 取指令，并指出下一条指令的位置。
* 对指令译码或测试，产生相应操作控制信号，以启动规定的动作。
* 指挥并控制CPU、内存和I/O设备之间数据流动的方向。 

### 5，CPU中的主要寄存器
各种计算机的CPU可能有这样或那样的不同，但是在CPU中至少要有6类寄存器

* 程序计数器（PC）
* 指令寄存器（IR）	
* 数据地址寄存器（AR）	
* 缓冲寄存器（DR）
* 通用寄存器（R0～R3）	
* 状态字寄存器（PSW）

> ### 各寄存器 ppt 中有详细介绍，我就不总结了。过于臃肿的总结如同鸡肋。


# **二，指令周期的概念及五条典型指令的周期**

* 指令周期：指取指令、分析指令到执行完该指令所需的全部时间。
* 各种指令功能变化多样，其指令周期亦不尽相同

### 1，周期 有：
* 机器周期：又称CPU周期 
通常把一条指令周期划分为若干个机器周期，每个机器周期完成一个基本操作 
* 时钟周期：节拍脉冲或T周期 
把一个机器周期分为若干个相等的时间段，每一个时间段称为一个节拍。
节拍常用具有一定宽度的电位信号表示，称之为节拍电位。


### 2，五条典型指令的周期：
* MOV指令（传送指令）
* LAD和STO指令(取存数指令)
* ADD/SUB指令（算术逻辑指令）
* AND/OR/XOR指令（逻辑运算指令）
* JMP指令（无条件跳转指令）

> ### 剩余部分看ppt，这块是大头。

# **三，掌握数据通路图和指令周期流程图**	
### 1，数据通路图：

数据通路就是数据的流动方向，CPU进行指令译码之后，就会根据操作码来进行指定的操作，数据通路就是数据在被处理的过程中依次经过各种器件的次序和方向。

### 2，指令周期流程图：

五条典型指令的周期，大头。

# **四，时序信号产生器的组成及控制方式**

### 1，组成：
一般由时钟源、环行脉冲发生器、节拍脉冲和读写时序译码逻辑、启停控制逻辑等组成。

### 2，控制方式：

##### 同步控制方式(固定时序控制方式)

##### 异步控制方式（可变时序控制方式）

##### 联合控制方式  

# **五，微程序控制器**

### 1，微操作、微命令、微指令、微程序的概念；其与指令、程序的关系

* 微命令：控制部件向执行部件发出的各种控制命令叫作微命令， 它是构成控制序列的最小单位
* 微操作：是微命令的操作过程。 
* 微指令：在一个CPU周期中，一组实现一定操作功能的微命令的组合构成一条微指令。
* 微程序：一条机器指令的功能可以由若干条微指令组成的序列来实现，这个微指令序列叫做微程序。


### 2，微程序控制器(MC)组成与工作原理 

微程序控制器主要由控制存储器、微指令寄存器和地址转移逻辑三大部分组成。
* #####  控制存储器
 
* #####  微指令寄存器

* #####  地址转移逻辑

##### 微程序控制的基本原理是：
* 将机器指令分解为基本的微命令序列，在制造CPU时固化在控制存储器CM中，执行一条机器指令时，CPU依次从CM中取出微指令产生微命令。
* 一条微指令包含的微命令控制实现一步（一个节拍）操作，若干条微指令组成一小段微程序解释执行一条机器指令。

### 3，CPU周期、微指令周期、指令周期之间的关系 

* 时钟周期（基本单位）=晶振频率的倒数
* 机器周期（CPU周期）：完成一个基本操作所需时间，基本操作包括：取值、间址、执行、中断等,与时钟周期有固定换算关系=12时钟周期（此谓12分频）
* 指令周期（与时钟周期无固定换算关系），视指令复杂程度，会有1个或多个机器周期，称单周期指令，双周期指令 等
* 微指令周期：在串行方式的微程序控制器中，微指令周期等于读出微指令的时间加上执行该条微指令的时间。为了保证整个机器的控制信号的同步，可以将一个微指令周期设计的恰好和CPU周期时间相等。

### 4，理解数据通路图，指令周期流程图标注微操作信号

##### 1,数据通路图，嘛，应该就是一种图。/滑稽

##### 2，指令周期流程图标注微操作信号 ，PPT上面有。



### 5，微指令格式及微程序设计技术  

微指令的格式大体分成两类：水平型微指令和垂直型微指令。
* 水平型微指令
一次能定义并执行多个并行操作微命令的微指令，叫做水平型微指令。 其一般格式如下： 
* 垂直型微指令
微指令中设置微操作码字段，采用微操作码编译法，由微操作码规定微指令的功能 ，称为垂直型微指令。

##### 水平型微指令与垂直型微指令的比较
*  水平型微指令并行操作能力强，效率高，灵活性强，垂直型微指令则较差。
*  水平型微指令执行一条指令的时间短，垂直型微指令执行时间长。
*  由水平型微指令解释指令的微程序，有微指令字较长而微程序短的特点。垂直型微指令则相反。
*  水平型微指令用户难以掌握，而垂直型微指令与指令比较相似，相对来说，比较容易掌握。

# 六，流水CPU的结构、三种冲突问题 	

### 1，流水计算机的系统组成
* 指令部件
* 指令队列
* 执行部件

程序和数据存放在主存中：主存采用多体交叉存储器，CPU与主存之间添加一个高速cache来弥补两者速度差异。

##### 指令部件本身构成一个流水线：取指令、指令译码、计算操作数地址、取操作数等几个过程段组成；
##### 指令队列：一个FIFO的寄存器队列，用来存放经过译码的指令和取来的数据，也是一条流水线；
##### 执行部件：具有多个算术逻辑运算部件，这些部件本身又用流水线方式构成，一般采用的实现方法：
   * 将执行部件分为定点执行部件和浮点执行部件两个可并行执行部分，分别处理定点运算指令和浮点运算指令；
   * 在浮点执行部件中，又有浮点加法部件和浮点乘/除部件，它们可同时执行不同的指令；
   * 浮点运算部件都以流水线方式工作。

### 2，三种冲突问题
##### 资源相关：
 多条指令进入流水线后在同一机器时钟周期内争用同一个功能部件所发生的冲突。     


解决方法：
   * 后继指令停顿一拍后再启动。
   * 增加相应资源。

##### 数据相关冲突
 解决办法主要用软件和硬件技术：
* 时间推后法
* 旁路技术或相关专用通路技术

##### 控制相关
由转移指令引起。当执行转移指令时，依据转移条件的产生结果，可能为顺序取下条指令；也可能转移到目标地址取指令，从而使流水线断流。


解决方法：
* 延迟转移法：由编译程序重排指令序列来实现。基本思想是“先执行再转移”；在不转移时，使延迟的时间得到有效利用。   
* 转移预测法：用硬件方法实现，依据指令过去的行为来预测将来的行为。通过使用转移取和顺序取两路指令预取队列以及目标指令cache，可将转移预测提前到取指阶段进行，以获得良好的效果。

# 七，RISC的思路　 
### 1，RISC的三个要素是：
* 一个有限的简单的指令集；
* CPU配备大量的通用寄存器；
* 强调对指令流水线的优化。

### 2，基于三要素的RISC机器的特征是：
(1)使用等长指令，目前的典型长度是4个字节。
(2)寻址方式少且简单，一般为2—3种，最多不超过4种，绝不出现存储器间接寻址方式。
(3)只有取数指令、存数指令访问存储器。指令中最多出现RS型指令，绝不出现SS型指令。
(4) 指令集中的指令数目一般少于100种，指令格式一般少于4种。
(5) 指令功能简单，控制器多采用硬布线方式，以期更快的执行速度。
(6) 平均而言，所有指令的执行时间为一个处理时钟周期。 
(7) 指令格式中用于指派整数寄存器的个数不少于32个，用于指派浮点数寄存器的个数不少于16个。
(8) 强调通用寄存器资源的优化使用。
(9) 支持指令流水并强调指令流水的优化使用。 
(10) RlSC技术的复杂性在于它的编译程序，因此软件系统开发时间比CISC机器长。　


> ## END
