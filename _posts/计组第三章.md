> 计组第三章，不想说啥。。好好复习吧


# **一，存储器的功能、分类，存储系统的结构层次**

### 1,半导体存储器：
* 存储器：用来存储程序和数据的记忆设备。
* 存储介质：具有两种明显区别且稳定的物理状态，在外界的作用下，能够相互转化；一种稳定状态表示“0”，则另一种状态表示“1”。目前主要采用半导体器件和磁性材料。
* 存储位或存储元：最小的存储单位是 一位二进制代码
* 存储单元：由若干个存储元组成。


### 2，存储器分类：
(1)随机存取存储器(RAM)
* 静态SRAM
* 动态DRAM
* 非易失RAM

(2)只读存储器(ROM)
* 掩膜ROM
* 可编程PROM
* 光擦除EPROM
* 电擦除EEPROM



### 3, 存储系统的结构层次


|由下至上容量越来越大，速度越来越慢|
 | --------   | 
脱机外存储器|
联机外存储器|
主存储器| 
高速缓存|
通用寄存器堆及指令、数据缓冲栈|

#  **二，主存储器的技术指标, 存储时间、存储周期、存储器带宽**

* 字存储单元：存放一个机器字的存储单元，相应的单元地址叫字地址。
* 字节存储单元：存放一个字节的单元，相应的地址称为字节地址。
* 存储容量：存储单元个数×每单元位数
* **存取时间：从启动读(写)操作到操作完成的时间**
* **存取周期：两次独立的存储器操作所需间隔的最小时间**
* 平均故障间隔时间（可靠性）
* 功耗：动态功耗、静态功耗
* **存储器带宽：单位时间里存储器所存取的信息量，通常以位/秒或字节/秒做度量单位**


# **三，静态存储器SRAM的存储原理**
# **四，动态存储器DRAM的存储原理**

### 1，SRAM存储器
SRAM的存储元（通常把存放一个二进制位的物理器件称为存储元）采用的是双稳态触发器（六管MOS）来记忆信息的，因此即使信息被读出后，它仍然会保持其原状态而不需要再生。当然断电之后肯定会丢失信息的，毕竟RAM是易失性的存储器。SRAM的存取速度快，功耗较大，一般用来做Cache。

* 根据SRAM的存储元的基本结构图可知，他是，静态MOS，六管单元

### 2，DRAM存储器

DRAM与SRAM的原理不同，它是利用存储元电路中栅极电容上的电荷来存储信息的，常见的DRAM的基本存储电路通常分为三管式和单管式。DRAM采用地址复用技术，地址线是原来的一半，地址信号分为行和列两次传送（这也就是DRAM比SRAM存取速度要慢的因素）。

既然DRAM采用电容上的电荷来存储信息，而电容上的电荷不可能不丢失，一般情况下，DRAM电容上的电荷只能维持1至2ms，过了这个时间，电荷就丢了，信息也就没了，所以我们要每隔一定时间对其进行刷新，这个时间通常分为刷新周期。常用的刷新方法有以下三种：

<div id="01"></div>

* 集中刷新：在一个刷新周期内，利用一段固定的时间，依次对存储器的所有行逐一再生，在此期间停止对存储器的读写操作，这段时间成为“死时间”，又叫访存的“死区”。显然这种方法可以让读写操作不受刷新工作的影响，但是在死区不能访问存储器，CPU只能干等着。

* 分散刷新：把对每一行的刷新分散到各个工作周期中去。比较生动地解释就是，原来我的工作只有存取，现在我的工作多了一个，就是在存取完之后顺便再“打扫”一行。这样，一个存储器的系统工作周期分为两部分，前半部分有用正常读、写或保持，后半部分用于刷新某一行。这种方法不存在死区，但是增加了系统的存取周期，如果原来存取周期只有0.5us，现在变成了1us，增加的0.5us要刷新一行。

* 异步刷新：前两种方法的结合，它可以缩短死时间，又充分利用最大刷新间隔为2ms的特点。做法是将刷新周期除以行数，得到每两次刷新之间的时间间隔t，逻辑电路每过t就产生一次刷新请求。这样就避免了使CPU等待过长时间，还减少了刷新次数，提高了工作效率。


### 3，四、SRAM与DRAM的区别

* 原理上的不同，SRAM原理是双稳态触发器，DRAM是栅极电容上的电荷；原理的不同导致SRAM不用刷新，DRAM要刷新。

* DRAM采用地址复用，SRAM不是。具体原因是这样的，存储芯片上的内容不是我们想象中的那样，一个地址对应一个存储单元，然后它们按照一维那样子顺序排列下去，它是个二维的存储矩阵，之前的存储芯片基本结构也提到了，所以它芯片内部寻址的时候是分行和列去找的，对于SRAM，它将行列直接传入进去找到相应存储单元，但是DRAM通常用作内存而不是Cache，它需要比Cache更大的容量而不是速度，所以在容量大的情况下，它的芯片内行数和列数也多，要一起传入岂不是要很多根地址线，这是不划算的，所以用地址复用，行和列分别传入。

### 区别：
|  | SRAM | DRAM |
--|:--|--:
原理|触法性|电容
读出| 非破坏性|破坏性
刷新|不用|用
送地址|一起送|行列分开送
速度|快|慢
集成度|低|高
功耗|高|低
成本|高|低
用途|Cache|内存 



# **五，动态存储器DRAM的刷新**

**三**和**四**有提到
[传送](#01)

# **六，存储器与CPU的连接方法,存储器容量的扩充：位扩展法、字扩展法、字位同时扩展法**

 CPU与存储器速度不匹配，以及在一个CPU周期中需几次到存储器存取信息，从而限制了高速计算，故必须设法提高存储器性能。

解决办法：
* 采用新工艺或加大存储器字长。             
* 每次存取更多信息。
* 在CPU和主存之间插入cache。
* 采用并行操作的双端口存储器


### 1,存储器容量的扩充：
* 存储器容量的扩展:

    总片数=总容量/(容量/片)

    例：存储器容量为8K×8b，若选用2114芯片(1K×4b)，则需要的芯片数为：(8K×8b)/(1K×4b)=16(片)

* 位扩展

    只在位数方向扩展(加大字长)，而芯片的字数和存储器的字数是一致的。即b前面不一样，K前面保持一样。

    例：用64K×1b的SRAM芯片组成64K×8b的存储器，所需芯片数为：(64K×8b)/(64K×1b)=8(片)

* 字扩展

    仅在字数方向扩展，而位数不变。即K前面不一样，b前面保持一样。

    例：用16K×8b的SRAM组成以64K×8b的存储器，所需芯片数为：(64K×8b)/(16K×8b)=4(片)

* 字和位同时扩展

# **七，半导体存储器的逻辑设计**

> ### 这个你就多做题吧

* 芯片的选用
* 存储空间的安排
* 地址分配与片选逻辑式(或用译码器实现片选)
* 信号线的连接即画出存储器的逻辑框图

# **八，奇偶校验码**

> ### 其实在第二章的总结中就已经有了

* 如果是奇校验加上校验位后,编码中1的个数为奇数个。如果是偶校验加上校验位后,编码中1的个数为偶数个。
* 当原编码在传输、储存的过程中发生了误码，1的数量就会改变，然后就能校验出该过程出现了错误。

### **例如,水平奇偶校验码:** (垂直奇偶校验同理)
| **原编码** | 奇校验 | 偶校验 |
--|:--|--:
0000 | 0000 1 | 0000 0
0010 | 0010 0 | 0010 1
1100 | 1100 1 | 1100 0
1010 | 1010 1 | 1010 0

### 缺点很多，例如：

设原编码为0000，传输的过程中变成了1001。如果使用奇校验，原编码是00001，传输过后会变成10011，1仍然是奇数个，无法校验；如果使用偶校验，原编码是00000，传输过后会变成10010，1仍然是偶数个，同样无法校验。


# **九，只读存储器和闪速存储器的基本原理**

### 1，只读存储器ROM

* 掩膜式只读存储器：数据在芯片制造过程中写入。
* PROM：一次可编程只读存储器。
* EPROM：光擦除可编程ROM，通过紫外线擦除。
* EEPROM：电擦除编程ROM，可通过电擦除。

##### 光擦可编程只读存储器（EPROM）:
* 基本存储元电路:
    与普通MOS电路不同的是：在S极和D极之间，有一个由多晶硅做的栅极，被浮空的绝缘物二氧化硅包围。
* 工作原理：
管子制造好时，硅栅上没有电荷，管子内没有导电沟道，D极和S极之间不能导通，表示“ 1 ” ；当两端加上高压时，击穿两极，有电子通过绝缘层注入到硅栅，当击穿的高压撤去，因硅栅被绝缘层包围，注入的电子无处泄露，两极是导通的，表示“ 0 ” 。




### 2，闪速存储器(Flash  Memory)

(1)闪速存储器及其特点:

闪速存储器是一种高密度、非易失性的读/写半导体存储器，它突破了传统的存储器体系，改善了现有存储器的特性。由于其体积小、速度快，广泛用于各种数码设备中(数码相机、MP3、U盘、手提电脑等)。

(2)闪速存储器的特点：

* 固有的非易失性：断电后信息不会丢失。
* 廉价的高密度：相同容量的闪速存储器和DRAM相比，其位成本相近。
* 可执行性：闪速存储器可以直接与CPU相连，大大提高程序和文件的访问速度。
* 固态性：闪速存储器是一种低功耗、高密度且无机电装置的半导体器件，特别适合便携式系统应用。

(3)闪速存储器的基本操作:


* 编程操作：编程操作就是对闪存的写操作。
* 读取操作：从闪存读出数据。
* 擦除操作：将闪存全部变为1。

# **十，双端口存储器的工作原理、逻辑结构、无\有冲突的读写控制、何谓冲突**

### 1，工作原理
同一个存储器具有两组相互独立的读写控制线路

### 2，逻辑电路

> ### 看不懂，自行看ppt

### 3，无冲突读写控制
当两个端口的地址不同时，在两个端口上进行读写操作，一定不会发生冲突。

### 4，有冲突的读写控制
当两个端口同时存取同一存储单元时，便发生读写冲突，为此设置BUSY标志。由存储器的仲裁逻辑决定对哪个端口优先进行读写操作，而对另一个被延迟的端口置BUSY标志，即暂时关闭此端口。

# **十一，多模块交叉存储器的工作原理、基本结构、存取方式。多模块排序存储器的交叉存储器带宽的计算**


### 存储器的模块化组

一个由若干个模块组成的主存储器是线性编址的。这些地址在各模块有两种安排方式：一种是顺序方式 ，一种是交叉方式 。

### 顺序方式：

* 优点：
      某个模块出现故障时，不影响其他模块工作；存储器的容量扩充比较方便。      
* 缺点：
      各个模块串行工作，存储器的带宽受到限制。
### 交叉方式：
连续地址分布在相邻不同模块内，而同一个模块内的地址不连续。 

* 优点：
对连续字的成块传送，容易实现多模块流水式的并行存取，能大大提高存储器带宽。

* 缺点：
多个模块必须协同工作，一个出现故障时，其他模块不能工作，且不便于存储器容量的扩充。

> ### 多模块排序存储器的交叉存储器带宽的计算,自行看ppt,这个看着就感觉很重要。



# **十二，Cache的功能。计算Cache命中率h，Cache-主存储系统的访问效率e和平均访问实践ta,Cache的替换策略。**

### 1，Cache的功能
cache是一种高速缓冲器，为解决CPU与主存之间速度不匹配而采用的一项重要技术。

### 2，Cache的基本原理
* CPU与cache间的数据交换是以字为单位；
* cache与主存间的数据交换是以块为单位；
* 当CPU读取主存的一个字时，便发送字的内存地址给cache和主存，此时cache的控制逻辑依据地址判断此字当前是否在cache中：若是，则此字立即传送给CPU，若非，则用主存读周期把此字从主存中读出送到CPU，同时将含有这个字的整个数据块从主存读出送到cache中。

### 3，Cache命中率h
在一段程序执行期间，cache完成存取次数为Nc，主存完成存取次数为Nm，h定义为命中率，
则有：
**h= Nc/(Nc+Nm)**

### 4，平均访问时间
**ta=htc+(1-h)tm**

### 5，访问效率
**e=tc/ta =tc/(htc+(1-h)tm)=1/(r+(1-r)h)**

##### 注：
tc：命中时cache的访问时间
tm：未命中时主存的访问时间
r=tm/tc：主存慢于cache的倍率

### 6，cache的替换策略

(1) 最不经常使用算法**LFU**(Least Frequently Used）
     将一段时间内被访问次数最少的那行数据换出。
     每行设置一个计数器，新行从0开始计数，每访问一次，计数器增1；替换时，把计数值最小的行换出，同时将这些特定行的计数器清零。
     缺点：计数周期是特定行两次替换之间的间隔，不能严格反映近期访问的情况。

(2) 近期最少使用算法**LRU**(Least Recently Used)
     将近期内长久未被访问过的行换出。
     每行设置一个计数器，每命中一次，命中行计数器清零，其它各行计数器增1；替换时，将计数值最大的行换出。保护了刚拷贝到cache的新数据行。

(3) 随机替换
      从特定的行位置中随机（Random）地选出一行换出即可。
      优点：硬件上容易实现，速度快。
      缺点：可能刚替换出的行马上又要使用，命中率低。


> ### 这一块还是要多做题

# **十三，cache的三种映射方式，主存地址格式，cache的地址格式，映射图的画法**

### 1，三种映射方式

* 全相联方式

* 直接相联

* 组相联

> ### 敲黑板，去刷题。


> ### 越来越觉得这种复习(预习)效率好低啊，不如直接去刷题，但是呢，直接去刷题又很懵逼，不知道在讲什么，所以呢 ，不要在这种总结上浪费太多时间，半天就应该过 一章 ，快速投入到有效的复习上。

> ## END

Thanks!

https://blog.csdn.net/qq_39378221/article/details/80769404

https://blog.csdn.net/Wonz5130/article/details/80721032

https://blog.csdn.net/non_recursive/article/details/4266453 
