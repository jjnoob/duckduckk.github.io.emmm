> ### 第四章，哎

# **一，何谓指令系统**

指令系统：又称**指令集**是计算机体系结构设计的核心，是计算机软、硬件接口，是用机器语言、汇编语言编写程序的用户所能看到的计算机的基本属性。

# **二，指令格式：操作码+地址码字段**

### 1，指令格式：
**操作码+地址码字段**

* 操作码字段：表示指令的操作特性与功能。
* 地址码字段：通常用于指定参与操作的操作数地址。

### 2，操作码
指定指令是执行什么性质的操作。不同的指令用操作码字段的不同编码表示

### 3，地址码

作用：常用于指定参与操作的操作数地址
根据指令中操作数地址的个数，将指令划分为：

##### (1)零地址指令：指令中只有操作码，没有地址码

<div id="01"></div>

|操作码|       |
| -------- | -----: | :----: |

“停机”、“空操作”、“清除”等控制类指令

##### (2)一地址指令：单操作数指令。
该指令常以AC中数作为被操作数，指令中地址码字段所指明的数为操作数，操作结果又放回AC。     
|操作码|   A    |
| -------- | -----: | :----: |

像 **+A**

##### (3)二地址指令：双操作数指令
两地址指明被操作数和操作数地址，其中A1兼做结果地址：
|操作码|    A1   |  A2|
| -------- | -----: | :----: |

像 **A2=A1+A2**

##### (4)三地址指令
三个地址分别指明被操作数、操作数以及结果存放地址：

     
|操作码|   A1    | A2 | A3|
| -------- | -----: | :----: | :----: |

像 **A3=A1+A2**

### 另：A与(A)的区别
* A 为内存或运算器中通用寄存器的地址；
* (A)为内存或运算器中通用寄存器地址为A中的数。


# **三，指令字长与机器字长。半字长指令、单字长指令、双字长指令**

#####  指令的长度是指一条指令所包含二进制代码的位数，取决于操作码长度和操作数地址个数及每个地址的长度。
##### 机器字长：计算机能直接处理的二进制数据的位数。

##### 指令长度与机器字长的关系：
* 半字长指令
* 单字长指令
*  双字长指令

# **四，操作码格式**

> ### 没在PPT上看到什么操作码格式，貌似PPT就一页带过，我看其他章节的PPT都有130多页，而这章只有50页，emmmm，所以。

# **五，地址提供方式。几种地址结构指令。操作码的扩展方法**

> ### 二里面讲了，这个考点划分貌似有点混乱，不是按照顺序来的。[传送](#01)

# **六，指令格式分析与设计**

> ### ppt上没有，自己做题吧。

# **七，指令的寻址方式及程序计数器PC在寻址过程中的作用**

### 1，顺序寻址方式
* 程序指令按顺序存放在内存中，执行时按顺序从内存中取出所要执行的指令。
* 程序计数器（指令指针寄存器，指令计数器）**PC**（Program Counter）存放正在执行的指令地址（要执行的下一指令地址）。

### 2， 跳跃寻址方式
* 程序要执行的下条指令地址不是由PC给出，而是由本指令的地址码给出。
* 用途：实现程序转移或构成循环程序。


# **八，操作数的寻址方式**

### 1， 隐含寻址
不明显指定操作数的地址，而是在指令中隐含着操作数的地址。比如单地址指令格式的第二操作数由AC隐含指定。

### 2， 立即寻址
* 特点：地址字段指出的不是操作数地址，而是
　　　操作数本身。
* 优点：无需访问内存，指令的执行时间很短。
* 缺点：操作数的范围受限。
* 适用范围：用于操作数固定的指令中，主要用于给寄存器或存储器赋初值。

##### 立即寻址特点：
* 立即数可以是8位的，也可以是16位的。若是16位的，则存储时低字节存在低地址，高字节存在高地址。只能是整数，不能是小数、变量或其它数据类型。
* 立即数只能作为源操作数，立即寻址主要用来给寄存器或存储器赋初值。以A～F开头的数字出现在指令中时，前面要加0。 
* 速度快（操作数直接在指令中，不需要运行总线周期）
* 立即数作为指令操作码的一部分与操作码一起放在代码段区域中。
* 指令的长度（翻译成机器语言后）较长，灵活性较差。

### 3，直接寻址
* 特点：地址字段直接指出操作数在内存中地址。
* 优点：简单。
* 缺点：寻址空间受限。

##### 直接寻址特点：
* 如果指令中没有指明操作数存放在哪一段，则系统默认为数据段DS。
* 操作数的有效地址与操作码一起存放在代码段区域，操作数一般在数据段区域中。
* 直接寻址是对存储器进行访问时可采用的最简单的形式。这种寻址方法是以数据段的地址为段基址，可在多达64KB的范围内寻找操作数。
* 直接寻址的地址如果是数值地址，则必须用“[ ]”括起来，以区别立即寻址方式。允许用符号地址（即程序中的标号）代替数值地址。

### 4, 间接寻址
* 特点：地址字段中的A是操作数地址的指针。
* 优点：寻址空间大。
* 缺点：需多次访问主存。
* 说明：两次访存影响执行速度，现已不大使用。

### 5, 寄存器寻址和寄存器间接寻址

* 寄存器寻址方式:寄存器中存放的是操作数。E=R
* 寄存器间接寻址方式:寄存器中存放的不是操作数，而是操作数在内存中的地址。E=(R)
##### 区别：
* 寄存器中前者存的是操作数，后者是操作数地址。
* 前者不需要访问内存，速度相对快；寻址空间小；
      后者需要访问内存，速度相对慢；寻址空间大。
* 联系：地址字段中给出的都是寄存器的编号。

### 6，偏移寻址

特点:是直接寻址和寄存器间接寻址方式的结合，有效地址计算公式为：
**E=A+(R)**

常用的三种偏移寻址方式为：
* 相对寻址
* 基址寻址
* 变址寻址

###### (1)相对寻址方式
特点：把PC的内容加上指令格式中形式地址A而形成操作数的有效地址E。
###### (2)基址寻址方式
特点：把基址寄存器的内容加上指令格式中A而形成操作数的E。
用途：可用于扩大寻址能力 
###### (3)变址寻址方式
特点：把某个变址寄存器的内容加上指令格式中A而形成操作数的E。
用途：用于实现程序块的有规律变化。

### 7, 段寻址方式

方法：E由段寄存器的内容加上段内偏移地址而形成。
应用：微型机采用段寻址方式，20位物理地址为16位
           段地址左移四位加上16位偏移量。            
分类：段内直接寻址；
  段内间接寻址；       
  段间直接寻址；            
  段间间接寻址

### 8，堆栈寻址方式  

* 堆栈：是一组能存入和取出数据的暂时存储单元。
* 区别：对数据的存取方法或寻址方式不同。
* 分类：寄存器堆栈和存储器堆栈。

##### (1)寄存器堆栈（硬堆栈，下压堆栈）
* 由CPU中的一组专门寄存器组成。
* 特点：数据传送在栈顶和某个通用寄存器之间进行。
* 存/取数方式：
     当压入数据时，栈中数据先向栈底移动一个数据字，空出栈顶寄存器来存放压入的数据。当取出数据时，从栈顶的寄存器中取出数据，栈中数据向栈顶顺序移动一个数据字。
* 缺点：
    容量有限；
    读出具有破坏性

##### (2)存储器堆栈（软堆栈）
* 在主存储器中划分出一部分区域来作为堆栈。
* 优点：
   * 容量可任意；
    * 可同时建立多个堆栈；
  * 可用对存储器寻址的任一指令来对堆栈中数据寻址。
* 需设置一个堆栈指示器SP(Stack Pointer)，它是CPU中的一个专用寄存器，指定堆栈的栈顶。     


# **九，基址与变址寻址的区别与应用**
（上海交通大学硕士研究生入学考试试题）

### 两者有不同的特点和用途：
* 在基址寻址的系统中，基址是不变的，程序中的所有地址都相对于基地址来变化。而对于变址寻址则相反，指令中的A给出的是一个存储器地址基准，变址寄存器X中存放的是相对于该基准地址的偏移量。不同的变址寄存器值指出了不同的单元；
* 在基址寻址中，偏移量位数较短，而在变址寻址中，偏移量位数足以表示整个存储空间；
* 前者主要解决程序逻辑空间与存储器物理空间的无关性，而后者主要为了可编写出高效率访问一片存储空间的程序。
